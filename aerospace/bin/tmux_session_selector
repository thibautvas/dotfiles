#!/bin/bash

if $(aerospace list-windows --all --format '%{app-bundle-id}' | grep -q 'com.mitchellh.ghostty'); then
  osascript -e '
    tell application "Ghostty"
      activate
	delay 0.1
        tell application "System Events"
          keystroke "d" using {command down}
	  delay 0.1
          keystroke "$HOME/.config/tmux/bin/attach_session"
          key code 36
        end tell
    end tell
  '
else
  open -a 'Ghostty'
  osascript -e '
    tell application "Ghostty"
      activate
      delay 0.1
        tell application "System Events"
          keystroke "$HOME/.config/tmux/bin/attach_session"
          key code 36
        end tell
    end tell
  '
fi
